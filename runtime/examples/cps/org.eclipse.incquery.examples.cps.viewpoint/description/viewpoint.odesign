<?xml version="1.0" encoding="UTF-8"?>
<description:Group xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:description="http://www.eclipse.org/sirius/description/1.1.0" xmlns:description_1="http://www.eclipse.org/sirius/diagram/description/1.1.0" xmlns:style="http://www.eclipse.org/sirius/diagram/description/style/1.1.0" name="viewpoint" version="10.1.3.201511131800">
  <ownedViewpoints name="deployment" modelFileExtension="deployment">
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="deployment-diagram" label="deployment-diagram" initialisation="true" domainClass="deployment.Deployment" enablePopupBars="true">
      <metamodel href="http://org.eclipse.incquery/model/deployment#/"/>
      <defaultLayer name="Default">
        <edgeMappings name="deployment-transition" semanticCandidatesExpression="aql:self.hosts.applications.behavior.transitions" sourceMapping="//@ownedViewpoints[name='deployment']/@ownedRepresentations[name='deployment-diagram']/@defaultLayer/@containerMappings[name='deployment-host']/@subContainerMappings[name='deployment-host-application']/@subNodeMappings[name='deployment-host-applcation-state']" targetMapping="//@ownedViewpoints[name='deployment']/@ownedRepresentations[name='deployment-diagram']/@defaultLayer/@containerMappings[name='deployment-host']/@subContainerMappings[name='deployment-host-application']/@subNodeMappings[name='deployment-host-applcation-state']" targetFinderExpression="feature:to" sourceFinderExpression="aql:self.eInverse()" domainClass="deployment.BehaviorTransition" useDomainElement="true">
          <style sizeComputationExpression="2" routingStyle="manhattan">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </edgeMappings>
        <containerMappings name="deployment-host" label="Host" semanticCandidatesExpression="feature:hosts" domainClass="deployment.DeploymentHost">
          <subContainerMappings name="deployment-host-application" semanticCandidatesExpression="feature:applications" domainClass="deployment.DeploymentApplication">
            <subNodeMappings name="deployment-host-applcation-state" semanticCandidatesExpression="aql:self.behavior.states" domainClass="deployment.BehaviorState">
              <style xsi:type="style:EllipseNodeDescription" labelExpression="feature:description" labelPosition="node" resizeKind="NSEW">
                <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
                <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_green']"/>
              </style>
            </subNodeMappings>
            <style xsi:type="style:FlatContainerStyleDescription" labelExpression="feature:id">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
              <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_gray']"/>
            </style>
          </subContainerMappings>
          <style xsi:type="style:FlatContainerStyleDescription" borderSizeComputationExpression="1" labelExpression="feature:ip">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='white']"/>
            <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_gray']"/>
          </style>
        </containerMappings>
        <decorationDescriptionsSet>
          <decorationDescriptions xsi:type="description_1:MappingBasedDecoration"/>
          <decorationDescriptions xsi:type="description:SemanticBasedDecoration"/>
        </decorationDescriptionsSet>
      </defaultLayer>
    </ownedRepresentations>
  </ownedViewpoints>
  <ownedViewpoints name="cps-satisfaction-analysis" modelFileExtension="cyberphysicalsystem">
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="cps-graph-stats" domainClass="cyberPhysicalSystem.CyberPhysicalSystem" enablePopupBars="true">
      <metamodel href="http://org.eclipse.incquery/model/cps#/"/>
      <metamodel href="http://www.eclipse.org/emf/2002/Ecore#/"/>
      <defaultLayer name="Default">
        <nodeMappings name="apptype" semanticCandidatesExpression="feature:appTypes" domainClass="cyberPhysicalSystem.ApplicationType">
          <style xsi:type="style:GaugeCompositeStyleDescription" borderSizeComputationExpression="1" labelExpression="feature:id" sizeComputationExpression="10" resizeKind="NSEW" alignment="HORIZONTAL">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <sections maxValueExpression="aql:self.behavior.states->size()" valueExpression="[self.behavior.states->size() - (self.behavior.initial->closure(v: State | v.outgoingTransitions.targetState)->size())/]" label="Unreachable states">
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_green']"/>
              <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_red']"/>
            </sections>
            <sections maxValueExpression="[self.instances->size()/]" valueExpression="[self.instances->select(a | a.allocatedTo = null)->size()/]" label="Unallocated instances">
              <backgroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_green']"/>
              <foregroundColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_red']"/>
            </sections>
          </style>
        </nodeMappings>
        <nodeMappings name="hosttype" semanticCandidatesExpression="feature:hostTypes" domainClass="cyberPhysicalSystem.HostType">
          <borderedNodeMappings name="num-of-allocated-instances" semanticCandidatesExpression="[self/]" domainClass="cyberPhysicalSystem.HostType">
            <style xsi:type="style:SquareDescription" showIcon="false" labelExpression="[self.instances->collect(a|a.applications->size())->max()->toString()/]" labelPosition="node" resizeKind="NSEW" width="6" height="3">
              <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
              <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            </style>
          </borderedNodeMappings>
          <style xsi:type="style:SquareDescription" labelExpression="feature:id" labelPosition="node" resizeKind="NSEW" width="10" height="5">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='light_blue']"/>
          </style>
        </nodeMappings>
        <edgeMappings name="hasAllocationOn" sourceMapping="//@ownedViewpoints[name='cps-satisfaction-analysis']/@ownedRepresentations[name='cps-graph-stats']/@defaultLayer/@nodeMappings[name='apptype']" targetMapping="//@ownedViewpoints[name='cps-satisfaction-analysis']/@ownedRepresentations[name='cps-graph-stats']/@defaultLayer/@nodeMappings[name='hosttype']" targetFinderExpression="aql:self.instances.allocatedTo->collect(a|a.eContainer())->asSet()">
          <style sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </edgeMappings>
      </defaultLayer>
    </ownedRepresentations>
  </ownedViewpoints>
  <ownedViewpoints name="cps-triggers" modelFileExtension="cyberphysicalsystem">
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="cps-triggers-mtl" domainClass="cyberPhysicalSystem.CyberPhysicalSystem" enablePopupBars="true">
      <layout xsi:type="description_1:CompositeLayout" padding="10" direction="LeftToRight"/>
      <defaultLayer name="Default">
        <nodeMappings name="application" semanticCandidatesExpression="[self.appTypes/]" domainClass="cyberPhysicalSystem.ApplicationType">
          <style xsi:type="style:SquareDescription" labelExpression="feature:id" sizeComputationExpression="10" labelPosition="node" resizeKind="NSEW">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </nodeMappings>
      </defaultLayer>
      <additionalLayers name="edges-mtl" label="Edges">
        <edgeMappings name="app-communicating" sourceMapping="//@ownedViewpoints[name='cps-triggers']/@ownedRepresentations[name='cps-triggers-mtl']/@defaultLayer/@nodeMappings[name='application']" targetMapping="//@ownedViewpoints[name='cps-triggers']/@ownedRepresentations[name='cps-triggers-mtl']/@defaultLayer/@nodeMappings[name='application']" targetFinderExpression="[self.cps.appTypes->select(a : ApplicationType |(not self.instances->select(allocatedTo &lt;> null).allocatedTo.communicateWith->asSet ()->intersection(a.instances->select(allocatedTo &lt;> null).allocatedTo->asSet())->isEmpty()) and (self.behavior.states.outgoingTransitions.action->select(v:String|v &lt;> null and v.startsWith('sendSignal'))->size() > 0 ) and (a.behavior.states.outgoingTransitions.action->select(v:String|v &lt;> null and v.startsWith('waitForSignal'))->size() > 0 )  )/]">
          <style sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            <centerLabelStyleDescription>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
      </additionalLayers>
    </ownedRepresentations>
    <ownedRepresentations xsi:type="description_1:DiagramDescription" name="cps-triggers-aql" domainClass="cyberPhysicalSystem.CyberPhysicalSystem" enablePopupBars="true">
      <layout xsi:type="description_1:CompositeLayout" padding="10" direction="LeftToRight"/>
      <defaultLayer name="Default">
        <nodeMappings name="application-aql" semanticCandidatesExpression="aql: self.appTypes " domainClass="cyberPhysicalSystem.ApplicationType">
          <style xsi:type="style:SquareDescription" labelExpression="feature:id" sizeComputationExpression="10" labelPosition="node" resizeKind="NSEW">
            <borderColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            <color xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
          </style>
        </nodeMappings>
      </defaultLayer>
      <additionalLayers name="edges-aql" label="Edges">
        <edgeMappings name="app-communicating" sourceMapping="//@ownedViewpoints[name='cps-triggers']/@ownedRepresentations[name='cps-triggers-aql']/@defaultLayer/@nodeMappings[name='application-aql']" targetMapping="//@ownedViewpoints[name='cps-triggers']/@ownedRepresentations[name='cps-triggers-aql']/@defaultLayer/@nodeMappings[name='application-aql']" targetFinderExpression="aql:self.cps.appTypes->select(a : cps::ApplicationType | (self.instances.allocatedTo.communicateWith->intersection(a.instances.allocatedTo)->size() > 0 ) and (self.behavior.states.outgoingTransitions.action->select(ac | ac.startsWith('sendSignal'))->size() > 0 ) and (a.behavior.states.outgoingTransitions.action->select(ac | ac.startsWith('waitForSignal'))->size() > 0 ) )">
          <style sizeComputationExpression="2">
            <strokeColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='gray']"/>
            <centerLabelStyleDescription>
              <labelColor xsi:type="description:SystemColor" href="environment:/viewpoint#//@systemColors/@entries[name='black']"/>
            </centerLabelStyleDescription>
          </style>
        </edgeMappings>
      </additionalLayers>
    </ownedRepresentations>
  </ownedViewpoints>
</description:Group>
